{"version":3,"sources":["webpack:///./src/pages/PhoneNumberChange/PhoneNumberChange.vue?d1ba","webpack:///./src/pages/PhoneNumberChange/PhoneNumberChange.vue?3246","webpack:///./src/pages/PhoneNumberChange/PhoneNumberChange.vue"],"names":["_hoisted_1","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","render","_ctx","_cache","$props","$setup","$data","$options","_component_typography","_component_r_input","_component_r_btn","_component_default_layout","title","default","variant","_","modelValue","phoneNumber","$event","$masks","masksDictionary","phone","fillMask","mask","rules","phoneNumberRules","color","label","onClick","handleSavePhoneNumber","disable","canSavePhoneNumber","tag","this","replace","sanitizeRegExp","requiredNumberLength","rawPhoneNumber","length","$validators","isValidPhoneNumber","userInfo","updatePhoneNumber","$analyticsUtils","pushEvent","eventLabel","dataLayerInfo","flowLabel","eventCategory","$router","push","name","$routeNames","AUTHORIZATION","query","redirectTo","redirect","redirectToPath","checkUserProfile","getNeedToUpdateProfile","flow","isNewUser","checkUserAndSendEvent","components","RInput","RBtn","__exports__"],"mappings":"uIAEMA,EAA0B,eAAiB,6DAC3CC,EAAa,CAAEC,MAAO,OACtBC,EAAa,CAAED,MAAO,kBACtBE,EAAa,CAAEF,MAAO,kBACtBG,EAA0B,eAAiB,yBAE3C,SAAUC,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,IAAMC,EAAwB,eAAkB,cAC1CC,EAAqB,eAAkB,WACvCC,EAAmB,eAAkB,SACrCC,EAA4B,eAAkB,kBAEpD,OAAQ,iBAAc,eAAaA,EAA2B,CAAEC,MAAO,mBAAqB,CAC1FC,QAAS,iBAAS,iBAAM,CACtB,eAAaL,EAAuB,CAClCX,MAAO,UACPiB,QAAS,kBACR,CACDD,QAAS,iBAAS,iBAAM,CACtBlB,MAEFoB,EAAG,IAEL,eAAoB,MAAOnB,EAAY,CACrC,eAAoB,MAAOE,EAAY,CACrC,eAAaW,EAAoB,CAC/BO,WAAYd,EAAKe,YACjB,sBAAuBd,EAAO,KAAOA,EAAO,GAAK,SAACe,GAAD,OAAmBhB,EAAKe,YAAeC,IACxF,YAAahB,EAAKiB,OAAOC,gBAAgBC,MAAMC,SAC/CC,KAAMrB,EAAKiB,OAAOC,gBAAgBC,MAAME,KACxCC,MAAO,CAACtB,EAAKuB,kBACbC,MAAO,QACPC,MAAO,GACP,cAAe,GACf,gBAAiB,IAChB,KAAM,EAAG,CAAC,aAAc,YAAa,OAAQ,YAElD,eAAoB,MAAO5B,EAAY,CACrC,eAAaW,EAAkB,CAC7BkB,QAAS1B,EAAK2B,sBACdC,SAAU5B,EAAK6B,mBACf,aAAc,GACd,YAAa,IACZ,CACDlB,QAAS,iBAAS,iBAAM,CACtB,eAAaL,EAAuB,CAClCwB,IAAK,OACLlB,QAAS,iBACTY,MAAO,oBACN,CACDb,QAAS,iBAAS,iBAAM,CACtBb,MAEFe,EAAG,QAGPA,EAAG,GACF,EAAG,CAAC,UAAW,oBAIxBA,EAAG,I,0MCzCc,EAArB,mQACgB,IADhB,4CAGa,eAAM,SAHnB,iDAKkB,eAAM,SALxB,oDAOqB,eAAM,SAP3B,4CASa,eAAM,SATnB,qDAWE,WACE,OAAOkB,KAAKhB,YAAYiB,QACtBD,KAAKd,OAAOC,gBAAgBC,MAAMc,eAClC,MAdN,8BAkBE,WACE,IAAMC,EAAuB,GAE7B,OAAOH,KAAKI,eAAeC,SAAWF,GACjCH,KAAKM,YAAYC,mBAAmBP,KAAKI,kBAtBlD,mCAyBE,WAAqB,MACnBJ,KAAKQ,SAASC,kBAAkBT,KAAKI,gBAErCJ,KAAKU,gBAAgBC,UAAU,mBAAoB,CACjDC,WAAU,UAAEZ,KAAKa,cAAcC,iBAArB,QAAkC,UAC5CC,cAAe,iBAGjBf,KAAKgB,QAAQC,KAAK,CAChBC,KAAMlB,KAAKmB,YAAYC,cACvBC,MAAO,CACLC,WAAYtB,KAAKuB,SAASC,oBApClC,8BAyCE,WACE,QAAKxB,KAAKM,YAAYC,mBAAmBP,KAAKI,iBACrC,OAAmBpB,cA3ChC,4FAiDE,oHACQgB,KAAKyB,iBAAiBC,yBAD9B,OAGE,eAAU,oBAAqB,CAE7Bd,WAAU,UAAEZ,KAAKa,cAAcC,iBAArB,QAAkC,UAC5CC,cAAe,eACfY,KAAM3B,KAAKyB,iBAAiBG,UAAY,MAAQ,SAPpD,gDAjDF,8EA4DE,WACE5B,KAAK6B,4BA7DT,GAA+C,QAA1B,EAAiB,gBANrC,eAAQ,CACPC,WAAY,CACVC,OAAA,OACAC,KAAA,WAGiB,W,qBCjBrB,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASjE,KAErD","file":"js/chunk-2d213e2e.74e2b0a8.js","sourcesContent":["import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\" Данные храним в зашифрованном виде и никому не передаем \")\nconst _hoisted_2 = { class: \"row\" }\nconst _hoisted_3 = { class: \"col-12 q-mt-md\" }\nconst _hoisted_4 = { class: \"col-12 q-mt-lg\" }\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" Получить код по СМС \")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_typography = _resolveComponent(\"typography\")!\n  const _component_r_input = _resolveComponent(\"r-input\")!\n  const _component_r_btn = _resolveComponent(\"r-btn\")!\n  const _component_default_layout = _resolveComponent(\"default-layout\")!\n\n  return (_openBlock(), _createBlock(_component_default_layout, { title: \"Введите телефон\" }, {\n    default: _withCtx(() => [\n      _createVNode(_component_typography, {\n        class: \"q-mt-sm\",\n        variant: \"body-1-regular\"\n      }, {\n        default: _withCtx(() => [\n          _hoisted_1\n        ]),\n        _: 1\n      }),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createVNode(_component_r_input, {\n            modelValue: _ctx.phoneNumber,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.phoneNumber) = $event)),\n            \"fill-mask\": _ctx.$masks.masksDictionary.phone.fillMask,\n            mask: _ctx.$masks.masksDictionary.phone.mask,\n            rules: [_ctx.phoneNumberRules],\n            color: \"black\",\n            label: \"\",\n            \"r-clearable\": \"\",\n            \"no-error-icon\": \"\"\n          }, null, 8, [\"modelValue\", \"fill-mask\", \"mask\", \"rules\"])\n        ]),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createVNode(_component_r_btn, {\n            onClick: _ctx.handleSavePhoneNumber,\n            disable: !_ctx.canSavePhoneNumber,\n            \"full-width\": \"\",\n            \"r-rounded\": \"\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_typography, {\n                tag: \"span\",\n                variant: \"body-1-regular\",\n                color: \"base-color-white\"\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_5\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"onClick\", \"disable\"])\n        ])\n      ])\n    ]),\n    _: 1\n  }))\n}","\nimport { Options, setup, Vue } from 'vue-class-component';\n\nimport {\n  useCheckUserProfile, useDataLayerInfo, useRedirect, useUserInfo,\n} from '@/composable';\n\nimport { validationMessages } from '@/common';\n\nimport { pushEvent } from '@/utils';\n\nimport {\n  RInput,\n  RBtn,\n} from '@/ui/atoms';\n\n@Options({\n  components: {\n    RInput,\n    RBtn,\n  },\n})\nexport default class PhoneNumberChange extends Vue {\n  phoneNumber = '';\n\n  userInfo = setup(useUserInfo);\n\n  dataLayerInfo = setup(useDataLayerInfo);\n\n  checkUserProfile = setup(useCheckUserProfile);\n\n  redirect = setup(useRedirect);\n\n  get rawPhoneNumber(): string {\n    return this.phoneNumber.replace(\n      this.$masks.masksDictionary.phone.sanitizeRegExp,\n      ''\n    );\n  }\n\n  get canSavePhoneNumber(): boolean {\n    const requiredNumberLength = 11;\n\n    return this.rawPhoneNumber.length === requiredNumberLength\n      && this.$validators.isValidPhoneNumber(this.rawPhoneNumber);\n  }\n\n  handleSavePhoneNumber(): void {\n    this.userInfo.updatePhoneNumber(this.rawPhoneNumber);\n\n    this.$analyticsUtils.pushEvent('phone_input_done', {\n      eventLabel: this.dataLayerInfo.flowLabel ?? 'telemed',\n      eventCategory: 'registration',\n    });\n\n    this.$router.push({\n      name: this.$routeNames.AUTHORIZATION,\n      query: {\n        redirectTo: this.redirect.redirectToPath,\n      },\n    });\n  }\n\n  phoneNumberRules(): boolean | string {\n    if (!this.$validators.isValidPhoneNumber(this.rawPhoneNumber)) {\n      return validationMessages.phoneNumber;\n    }\n\n    return true;\n  }\n\n  async checkUserAndSendEvent(): Promise<void> {\n    await this.checkUserProfile.getNeedToUpdateProfile();\n\n    pushEvent('phone_input_start', {\n      // todo get actual flowLabel\n      eventLabel: this.dataLayerInfo.flowLabel ?? 'telemed',\n      eventCategory: 'registration',\n      flow: this.checkUserProfile.isNewUser ? 'reg' : 'auth',\n    });\n  }\n\n  mounted(): void {\n    this.checkUserAndSendEvent();\n  }\n}\n","import { render } from \"./PhoneNumberChange.vue?vue&type=template&id=d94f3532&ts=true\"\nimport script from \"./PhoneNumberChange.vue?vue&type=script&lang=ts\"\nexport * from \"./PhoneNumberChange.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\alfaw\\\\Desktop\\\\Проекты\\\\Ренессанс\\\\project\\\\source\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}